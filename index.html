<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | 360 WebGL</title>
    <style>
        body {
          margin: 0;
          padding: 0;
          overflow: hidden; /* Prevent scrolling */
          text-align: center;
          background-color: #231F20;
        }
        #unity-container {
          position: absolute;
          /* top: 50%;
          left: 50%;
          transform: translate(-50%, -50%); */
        }
        #unity-canvas {
          background: #231F20;
        }
        #fullscreen-button {
          position: absolute;
          bottom: 10px;
          right: 10px;
          z-index: 1000;
          background: rgba(0, 0, 0, 0.7);
          color: white;
          border: none;
          padding: 10px;
          border-radius: 5px;
          cursor: pointer;
          font-size: 16px;
        }
        #fullscreen-button:hover {
          background: rgba(0, 0, 0, 0.9);
        }
      </style>
  </head>
  <body style="text-align: center; padding: 0; border: 0; margin: 0;">
    <div id="unity-container" style="position: relative;">
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1" style="width: 960px; height: 600px; background: #231F20"></canvas>
      <button id="fullscreen-button">ðŸ”³</button>
    </div>
    
    <script src="Build/Webgl final.loader.js"></script>
    <script>
      function resizeCanvas() {
        const canvas = document.getElementById("unity-canvas");
        const container = document.getElementById("unity-container");

        // Original aspect ratio of the canvas (width / height)
        const aspectRatio = canvas.width / canvas.height;

        // Calculate the maximum size the canvas can be while maintaining aspect ratio
        let newWidth = window.innerWidth;
        let newHeight = newWidth / aspectRatio;

        if (newHeight > window.innerHeight) {
          newHeight = window.innerHeight;
          newWidth = newHeight * aspectRatio;
        }

        // Apply the new width and height
        canvas.style.width = `${newWidth}px`;
        canvas.style.height = `${newHeight}px`;
        container.style.width = `${newWidth}px`;
        container.style.height = `${newHeight}px`;
      }

      window.addEventListener("resize", resizeCanvas);
      resizeCanvas(); // Call it once on load to initialize the canvas size

      createUnityInstance(document.querySelector("#unity-canvas"), {
        dataUrl: "Build/Webgl final.data",
        frameworkUrl: "Build/Webgl final.framework.js",
        codeUrl: "Build/Webgl final.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "360 WebGL",
        productVersion: "0.1",
      });

      const fullscreenButton = document.getElementById("fullscreen-button");
      fullscreenButton.addEventListener("click", () => {
        const container = document.getElementById("unity-container");
        alert();
        if (!document.fullscreenElement && !document.webkitFullscreenElement) {
          if (container.requestFullscreen) {
            container.requestFullscreen();
          } else if (container.mozRequestFullScreen) { // Firefox
            container.mozRequestFullScreen();
          } else if (container.webkitRequestFullscreen) { // Chrome, Safari, Opera
            container.webkitRequestFullscreen();
          } else if (container.msRequestFullscreen) { // IE/Edge
            container.msRequestFullscreen();
          } else if (container.webkitEnterFullscreen) { // iOS (Safari)
            container.webkitEnterFullscreen();
          }
        } else {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.mozCancelFullScreen) { // Firefox
            document.mozCancelFullScreen();
          } else if (document.webkitExitFullscreen) { // Chrome, Safari, Opera
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) { // IE/Edge
            document.msExitFullscreen();
          }
        }
      });
    </script>
  </body>
</html>
